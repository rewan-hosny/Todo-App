"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var a,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;0<=n;n--)(a=e[n])&&(s=(i<3?a(s):3<i?a(t,r,s):a(t,r))||s);return 3<i&&s&&Object.defineProperty(t,r,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),axios_1=require("axios"),UserService=function(){function e(e,t,r,o){this.http=e,this.jwtHelper=t,this.localStorage=r,this.router=o,this.baseUrl="https://localhost:7101/api/"}return e.prototype.register=function(e){var o=this;return axios_1.default.post(this.baseUrl+"Auth/register",e).then(function(e){var t=e.data,r=o.jwtHelper.decodeToken(t);return localStorage.setItem("Authorization",t),localStorage.setItem("name",r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),localStorage.setItem("userid",r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]),o.router.navigate(["/todo"]),!0}).catch(function(e){return e.response.data.error})},e.prototype.login=function(e,t){var o=this;this.http.post("https://localhost:7101/api/Auth/login",{email:e,password:t},{responseType:"text"}).subscribe(function(e){var t=e;if(t){var r=o.jwtHelper.decodeToken(t);localStorage.setItem("Authorization",t),localStorage.setItem("name",r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),localStorage.setItem("userid",r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]),o.router.navigate(["/todo"])}})},e.prototype.isAuthenticated=function(){var e=localStorage.getItem("Authorization");if(!e)return!1;var t=e.replace("Bearer ","");return!this.jwtHelper.isTokenExpired(t)},e.prototype.logout=function(){localStorage.removeItem("access_token")},e=__decorate([core_1.Injectable({providedIn:"root"})],e)}();exports.UserService=UserService;
//# sourceMappingURL=user-service.service.min.js.map
