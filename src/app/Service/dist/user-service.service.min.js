"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var n=e.length-1;0<=n;n--)(a=e[n])&&(s=(i<3?a(s):3<i?a(t,o,s):a(t,o))||s);return 3<i&&s&&Object.defineProperty(t,o,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),UserService=function(){function e(e,t,o,r){this.http=e,this.jwtHelper=t,this.localStorage=o,this.router=r,this.baseUrl="https://localhost:7101/api/"}return e.prototype.register=function(e,t,o){var r=this;this.http.post(this.baseUrl+"Auth/register",{email:e,name:t,password:o},{responseType:"text"}).subscribe(function(t){var e=t;try{var o=r.jwtHelper.decodeToken(e);localStorage.setItem("Authorization",e),localStorage.setItem("name",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),localStorage.setItem("userid",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]),r.router.navigate(["/todo"])}catch(e){console.log(e),console.log(t)}},function(e){console.log(e)})},e.prototype.login=function(e,t){var r=this;this.http.post("https://localhost:7101/api/Auth/login",{email:e,password:t},{responseType:"text"}).subscribe(function(e){var t=e;if(t){var o=r.jwtHelper.decodeToken(t);localStorage.setItem("Authorization",t),localStorage.setItem("name",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),localStorage.setItem("userid",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]),r.router.navigate(["/todo"])}})},e.prototype.isAuthenticated=function(){var e=localStorage.getItem("Authorization");if(!e)return!1;var t=e.replace("Bearer ","");return!this.jwtHelper.isTokenExpired(t)},e.prototype.logout=function(){localStorage.removeItem("Authorization")},e=__decorate([core_1.Injectable({providedIn:"root"})],e)}();exports.UserService=UserService;
//# sourceMappingURL=user-service.service.min.js.map
